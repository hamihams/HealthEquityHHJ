<!-- This is a blank template.  You can copy this to make a new template page. -->

{% extends 'base.html' %}

{% block body %}
<div class="container m-5">
    <div class="row">
      <div class="col">
        {% if review %}
    {{moment(review.create_date).calendar()}} by {{review.author.fname}} {{review.author.lname}} 
    {% if review.modifydate %}
        modified {{moment(review.modifydate).calendar()}}
    {% endif %}
    <br>
    {% if review.author == current_user %}
        <a data-toggle="tooltip" data-placement="top" title="Edit Blog" href="/review/edit/{{review.id}}">
            <img width="40" class="bottom-image" src="/static/edit.png">
        </a>
        <a data-toggle="tooltip" data-placement="top" title="Delete Review" href="/review/delete/{{review.id}}">
            <img width="40" class="bottom-image" src="/static/delete.png">
        </a>
    {% endif %}
    <br>
    <h1 class="display-5" style="font-family:Georgia, 'Times New Roman', Times, serif; color:#30436c">{{review.name}}</h1>
    <br>
    <h1 class="display-5" style="font-family:Georgia, 'Times New Roman', Times, serif; color:#30436c"> Rating 0-5: {{review.rating}}</h1>
    <br>
    <h3 style="font-family:Georgia, 'Times New Roman', Times, serif; color:#45567b">{{review.text}}</h3>
    <br>
    <a href="/reply/new/{{review.id}}" class="btn btn-primary btn-sm" role="button" style="font-family:Georgia, 'Times New Roman', Times, serif ; color:#ffffff; width:100px; height:50px; font-size: x-large;">Reply</a>
    {% if replies %}

    <h1 class="display-5" style="font-family:Georgia, 'Times New Roman', Times, serif; color:#4b4691">Replies</h1>
    {% for reply in replies %}
        {% if current_user == reply.author %}
            <a href="/reply/delete/{{reply.id}}"><img width="20" src="/static/delete.png"></a> 
            <a href="/reply/edit/{{reply.id}}"><img width="20" src="/static/edit.png"></a>
        {% endif %}
        {{reply.author.fname}} {{reply.author.lname}}: {{moment(reply.create_date).calendar()}}  
        {% if reply.modifydate %}
            modified {{moment(reply.modifydate).calendar()}}
        {% endif %}
        <br>
        <p class="fs-3" style="font-family:Georgia, 'Times New Roman', Times, serif; color:#544cc2">
            {{reply.text}}
        </p>
    {% endfor %}
    {% else %}
        <h1 class="display-5" style="font-family:Georgia, 'Times New Roman', Times, serif; color:#544cc2">No Replies</h1>
    {% endif %}
     </div>
     <div class="col text-center">
            {% if review.author.image %}
                    <img width="300" class="img-thumbnail " src="data:image;base64,{{base64encode(review.author.image.read())}}">
                {% endif %}
            </div>
        </div>
        
{% else %}
{% endif %}
{% endblock %}